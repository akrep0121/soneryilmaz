<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title id="site-title">Soner Yılmaz | FinTech Geliştiricisi & Yatırım Analisti</title>
    <meta name="description" id="site-description" content="Finansal piyasaları kod ve yapay zeka ile analiz eden, halka arz ve borsa stratejileri geliştiren junior yazılımcı portfolyosu.">
    <meta name="keywords" id="site-keywords" content="Soner Yılmaz, Borsa, Yatırım, Halka Arz, BES, Yazılım, Yapay Zeka, FinTech">
    <meta name="author" content="Soner Yılmaz">
    <link id="site-canonical" rel="canonical" href="https://soneryilmaz.vercel.app">
    
    <meta name="google-site-verification" content="o7JFkAV3NWZulmJ98WX6VZ6mnVI60aVpPMr2u-ozLPU" />
    
    <!-- Open Graph -->
    <meta property="og:title" id="og-title" content="Soner Yılmaz | FinTech Geliştiricisi & Yatırım Analisti">
    <meta property="og:description" id="og-description" content="Finansal piyasaları kod ve yapay zeka ile analiz eden, halka arz ve borsa stratejileri geliştiren junior yazılımcı portfolyosu.">
    <meta property="og:type" content="website">
    <meta property="og:url" id="og-url" content="https://soneryilmaz.vercel.app">
    <meta property="og:image" id="og-image" content="https://soneryilmaz.vercel.app/og-image.jpg">
    <meta property="og:site_name" content="Soner Yılmaz">
    <meta property="og:locale" content="tr_TR">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" id="twitter-card" content="summary_large_image">
    <meta name="twitter:site" content="@soner_yilmz">
    <meta name="twitter:creator" content="@soner_yilmz">
    <meta name="twitter:title" id="twitter-title" content="Soner Yılmaz | FinTech Geliştiricisi & Yatırım Analisti">
    <meta name="twitter:description" id="twitter-description" content="Finansal piyasaları kod ve yapay zeka ile analiz eden, halka arz ve borsa stratejileri geliştiren junior yazılımcı portfolyosu.">
    <meta name="twitter:image" id="twitter-image" content="https://soneryilmaz.vercel.app/og-image.jpg">

    <script type="application/ld+json" id="structured-data-ld"></script>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;900&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #000; color: #ededed; scroll-behavior: smooth; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.05); border-radius: 10px; }
        .prose img { border-radius: 1.5rem; margin: 2rem 0; width: 100%; border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        .hidden-modal { display: none !important; }
        .rich-editor { min-height: 300px; outline: none; border: 1px solid rgba(255,255,255,0.06); padding: 1.5rem; border-radius: 1.5rem; background: rgba(255,255,255,0.01); }
        .rich-editor:focus { border-color: #6366f1; }
        .toast-notification { position: fixed; bottom: 2rem; right: 2rem; background: #6366f1; color: white; padding: 1rem 2rem; border-radius: 1rem; transform: translateY(200%); transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 200; font-weight: 600; }
        .toast-show { transform: translateY(0); }
        section { scroll-margin-top: 100px; }
        .btt-hidden { opacity: 0; pointer-events: none; transform: translateY(20px); }
        .btt-visible { opacity: 1; pointer-events: auto; transform: translateY(0); }
        #site-profile-img { transition: opacity 0.8s ease-in-out; opacity: 0; }
        #site-profile-img.loaded { opacity: 0.9; }
        .search-input-focus:focus-within { border-color: rgba(99, 102, 241, 0.4); background: rgba(255, 255, 255, 0.03); }
        
        .blog-card { opacity: 0; transform: translateY(30px); animation: fadeUp 0.6s ease-out forwards; }
        @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }
        .skeleton { background: linear-gradient(90deg, rgba(255,255,255,0.02) 25%, rgba(255,255,255,0.05) 50%, rgba(255,255,255,0.02) 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; }
        @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
        .category-chip { transition: all 0.3s ease; }
        .category-chip:hover { transform: translateY(-2px); }
        .blog-card:hover .card-img { transform: scale(1.08); }
        .blog-card:hover { transform: translateY(-8px); box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); }
        .featured-overlay { background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.4) 50%, transparent 100%); }
        .sidebar-card:hover { background: rgba(255,255,255,0.03); border-color: rgba(99, 102, 241, 0.3); }
    </style>
</head>
<body class="overflow-x-hidden">

    <div id="scroll-progress" class="fixed top-0 left-0 h-0.5 bg-indigo-500 z-[100] transition-all duration-100" style="width: 0%"></div>
    <div id="copy-toast" class="toast-notification">İşlem Başarılı!</div>

    <nav class="fixed w-full z-50 p-8 flex justify-center">
        <div class="bg-white/[0.02] backdrop-blur-3xl border border-white/[0.08] px-12 py-4 rounded-full shadow-2xl flex items-center gap-16 transition-all hover:border-white/[0.12]">
            <div class="text-2xl font-black tracking-tighter text-white uppercase italic select-none">
                Soner<span class="text-indigo-500">.</span>
            </div>
            <div class="hidden md:flex gap-12 text-[10px] font-black uppercase tracking-[0.3em] text-gray-500">
                <a href="#home" class="hover:text-white transition">Giriş</a>
                <a href="#blog-section" class="hover:text-white transition">Yazılar</a>
                <a href="#about-section" class="hover:text-white transition">Hakkımda</a>
                <a href="#contact-section" class="hover:text-white transition">İletişim</a>
            </div>
        </div>
    </nav>

    <section id="home" class="pt-80 pb-40 px-6 max-w-6xl mx-auto text-center relative z-10">
        <div class="fixed inset-0 pointer-events-none">
            <div class="absolute top-0 left-1/2 -translate-x-1/2 w-[1000px] h-[600px] bg-indigo-500/5 blur-[150px] rounded-full opacity-50 animate-pulse"></div>
        </div>
        <div class="mb-20 relative inline-block group text-center">
            <div class="absolute inset-0 bg-white/10 rounded-full blur-3xl opacity-0 group-hover:opacity-20 transition duration-1000"></div>
            <img id="site-profile-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="w-44 h-44 rounded-full object-cover grayscale border border-white/10 shadow-2xl group-hover:grayscale-0 mx-auto" onload="this.classList.add('loaded')" />
        </div>
        <div class="flex flex-col items-center">
            <div class="inline-flex items-center gap-3 bg-white/[0.04] border border-white/[0.08] px-8 py-2.5 rounded-full text-[10px] font-black tracking-[0.4em] text-indigo-400 uppercase mb-12">
                <i data-lucide="globe" class="w-3.5 h-3.5"></i> <span id="site-role">FinTech Geliştiricisi & Yatırım Analisti</span>
            </div>
            <h1 id="site-hero-title" class="text-7xl md:text-[11rem] font-black tracking-tighter leading-[0.8] mb-24 text-white uppercase text-center">
                Geleceği <span class="text-indigo-500">bugünden</span> inşa edin.
            </h1>
            <button onclick="document.getElementById('blog-section').scrollIntoView()" class="px-8 py-4 bg-white text-black rounded-full font-bold transition-all text-sm uppercase tracking-widest hover:bg-gray-200">İçerikleri Keşfet</button>
        </div>
    </section>

    <section id="blog-section" class="py-60 px-6 max-w-[1600px] mx-auto border-t border-white/[0.05]">
        
        <div class="mb-32 bg-gradient-to-br from-indigo-500/5 to-purple-500/5 border border-white/[0.05] p-12 md:p-24 rounded-[3rem] text-center relative overflow-hidden group">
            <div class="absolute inset-0 bg-gradient-to-r from-indigo-500/10 via-purple-500/10 to-indigo-500/10 opacity-0 group-hover:opacity-100 transition duration-1000 blur-3xl"></div>
            <div class="relative z-10 max-w-3xl mx-auto">
                <div class="inline-flex items-center gap-3 bg-white/[0.05] border border-white/[0.1] px-6 py-2.5 rounded-full text-[10px] font-black uppercase tracking-[0.4em] text-indigo-400 mb-8">
                    <i data-lucide="sparkles" class="w-3.5 h-3.5"></i> ÖZEL İÇERİKLER
                </div>
                <h2 class="text-4xl md:text-6xl font-black tracking-tighter text-white uppercase mb-6 leading-tight">Haftalık <span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400">analizler</span> ve stratejiler</h2>
                <p class="text-gray-400 text-lg mb-8 max-w-xl mx-auto">Finansal piyasalardan, yazılım dünyasından ve yapay zeka trendlerinden en güncel gelişmeler.</p>
                <form id="newsletter-form-main" class="flex flex-col md:flex-row gap-4 max-w-lg mx-auto">
                    <input type="email" required placeholder="E-POSTA ADRESİNİZ" class="flex-1 bg-white/5 border border-white/10 rounded-2xl px-6 py-4 outline-none focus:border-indigo-500 text-sm font-bold tracking-widest transition backdrop-blur-xl" />
                    <button type="submit" class="bg-gradient-to-r from-indigo-500 to-purple-500 text-white px-8 py-4 rounded-2xl font-black text-xs uppercase tracking-[0.2em] hover:from-indigo-600 hover:to-purple-600 transition shadow-lg shadow-indigo-500/25 whitespace-nowrap">
                        <span class="flex items-center gap-2"><i data-lucide="arrow-right" class="w-4 h-4"></i> Abone Ol</span>
                    </button>
                </form>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8 lg:gap-12">
            
            <div class="lg:col-span-3">
                
                <div class="mb-16">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-end gap-6 mb-8">
                        <div>
                            <h2 class="text-5xl md:text-6xl font-black tracking-tighter text-white uppercase mb-3">Güncel <span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400">Yazılar</span></h2>
                            <p class="text-gray-500 text-sm font-medium tracking-widest">Toplam <span id="total-posts-count" class="text-indigo-400">0</span> içerik</p>
                        </div>
                        <div class="flex flex-wrap gap-3 w-full md:w-auto">
                            <select id="sort-select" onchange="window.handleSort(this.value)" class="bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-xs font-bold uppercase tracking-widest text-white outline-none focus:border-indigo-500 cursor-pointer hover:bg-white/[0.08] transition">
                                <option value="newest">En Yeni</option>
                                <option value="popular">En Popüler</option>
                                <option value="comments">En Çok Yorum</option>
                            </select>
                        </div>
                    </div>

                    <div id="category-filters" class="flex flex-wrap gap-3 mb-10">
                        <button onclick="window.filterByCategory('all')" class="category-chip active bg-indigo-500 text-white px-5 py-2 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-indigo-400" data-category="all">Tümü</button>
                    </div>

                    <div class="w-full relative search-input-focus border border-white/10 bg-white/[0.01] rounded-2xl p-2 transition-all mb-12">
                        <i data-lucide="search" class="absolute left-5 top-1/2 -translate-y-1/2 text-gray-500 w-4 h-4"></i>
                        <input type="text" id="blog-search" placeholder="İçeriklerde ara (başlık, kategori, etiket)..." oninput="window.handleSearch(this.value)" class="w-full bg-transparent pl-12 pr-4 py-3 outline-none text-sm text-white placeholder-gray-600 font-medium" />
                        <i data-lucide="x" class="absolute right-5 top-1/2 -translate-y-1/2 text-gray-600 w-4 h-4 cursor-pointer hover:text-white transition" onclick="document.getElementById('blog-search').value = ''; window.handleSearch('');" id="clear-search" style="display: none;"></i>
                    </div>

                    <div id="featured-post" class="mb-16 hidden"></div>

                    <div id="blog-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <div class="col-span-full flex justify-center py-20">
                            <div class="flex flex-col items-center gap-4">
                                <div class="w-16 h-16 skeleton rounded-full animate-pulse"></div>
                                <div class="w-48 h-4 skeleton rounded animate-pulse"></div>
                            </div>
                        </div>
                    </div>

                    <div id="load-more-container" class="text-center mt-12 hidden">
                        <button id="load-more-btn" onclick="window.loadMorePosts()" class="bg-white/5 border border-white/10 text-white px-12 py-4 rounded-full font-bold text-sm uppercase tracking-widest hover:bg-white/10 hover:border-indigo-500 transition-all duration-300">
                            <span class="flex items-center gap-2"><i data-lucide="plus" class="w-4 h-4"></i> Daha Fazla Göster</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-1 space-y-8">
                
                <div class="bg-white/[0.02] border border-white/[0.05] p-8 rounded-[2.5rem] sticky top-32 space-y-8">
                    
                    <div class="space-y-6">
                        <h3 class="text-lg font-black uppercase tracking-widest text-white flex items-center gap-3">
                            <i data-lucide="trending-up" class="w-5 h-5 text-indigo-400"></i> Popüler
                        </h3>
                        <div id="popular-posts" class="space-y-4">
                            <div class="space-y-3">
                                <div class="w-full h-16 skeleton rounded-xl"></div>
                                <div class="w-3/4 h-3 skeleton rounded"></div>
                            </div>
                        </div>
                    </div>

                    <div class="border-t border-white/[0.05] pt-8 space-y-6">
                        <h3 class="text-lg font-black uppercase tracking-widest text-white flex items-center gap-3">
                            <i data-lucide="folder" class="w-5 h-5 text-purple-400"></i> Kategoriler
                        </h3>
                        <div id="category-list" class="space-y-3"></div>
                    </div>

                    <div class="border-t border-white/[0.05] pt-8 space-y-6">
                        <h3 class="text-lg font-black uppercase tracking-widest text-white flex items-center gap-3">
                            <i data-lucide="tags" class="w-5 h-5 text-pink-400"></i> Etiketler
                        </h3>
                        <div id="tags-list" class="flex flex-wrap gap-2"></div>
                    </div>

                    <div class="border-t border-white/[0.05] pt-8 space-y-6">
                        <h3 class="text-lg font-black uppercase tracking-widest text-white flex items-center gap-3">
                            <i data-lucide="calendar" class="w-5 h-5 text-emerald-400"></i> Arşiv
                        </h3>
                        <div id="archive-list" class="space-y-3"></div>
                    </div>

                </div>
            </div>
        </div>
    </section>

    <section id="about-section" class="py-60 px-6 bg-white/[0.01] border-y border-white/[0.05] relative text-center">
        <div class="max-w-4xl mx-auto text-center">
            <h2 class="text-6xl md:text-8xl font-black tracking-tighter text-white uppercase mb-20">Motivasyon</h2>
            <p id="site-about-text" class="text-3xl md:text-5xl text-gray-400 leading-[1.4] font-medium italic opacity-80 tracking-tight">"Modern web dünyasında vizyoner işler üretiyorum."</p>
        </div>
    </section>

    <section id="contact-section" class="py-60 px-6 max-w-4xl mx-auto text-center border-t border-white/[0.05]">
        <h2 class="text-7xl font-black tracking-tighter text-white uppercase mb-20">BANA <span class="text-indigo-500">ULAŞIN</span></h2>
        <form id="site-contact-form" class="grid grid-cols-1 md:grid-cols-2 gap-12">
            <input name="name" required placeholder="İSİM" class="w-full bg-transparent border-b border-white/10 py-6 outline-none focus:border-indigo-500 text-xl font-bold uppercase transition" />
            <input name="email" type="email" required placeholder="E-POSTA" class="w-full bg-transparent border-b border-white/10 py-6 outline-none focus:border-indigo-500 text-xl font-bold uppercase transition" />
            <textarea name="message" required placeholder="MESAJINIZ" class="md:col-span-2 w-full bg-transparent border-b border-white/10 py-6 outline-none focus:border-indigo-500 text-xl font-bold uppercase transition" rows="4"></textarea>
            <div class="md:col-span-2 flex justify-center pt-12">
                <button type="submit" id="contact-submit-btn" class="px-20 py-6 bg-white text-black rounded-full font-bold transition-all text-lg uppercase tracking-widest hover:bg-gray-200">Mesaj Gönder</button>
            </div>
        </form>
    </section>

    <footer class="py-40 px-6 border-t border-white/[0.05] bg-[#000]">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-12">
            <div class="text-[10px] font-black tracking-[0.5em] uppercase text-gray-600 flex items-center gap-4">
                <span id="site-name-footer">Soner Yılmaz</span> &copy; 2025
                <div id="admin-trigger" class="w-3 h-3 bg-white/5 rounded-full cursor-pointer hover:bg-indigo-500/40 transition shadow-sm" title="Yönetici Girişi"></div>
            </div>
            <div class="flex gap-16 text-[10px] font-black uppercase tracking-[0.4em] text-gray-500">
                <a href="https://x.com/soner_yilmz" target="_blank" class="hover:text-indigo-400 transition">Twitter / @soner_yilmz</a>
            </div>
        </div>
    </footer>

    <div id="reader-modal" class="fixed inset-0 z-[100] bg-black backdrop-blur-3xl flex items-center justify-center p-0 md:p-12 hidden-modal transition-opacity duration-500">
        <div class="bg-[#050505] w-full max-w-7xl h-full md:max-h-[95vh] md:rounded-[4rem] border border-white/10 flex flex-col md:flex-row overflow-hidden shadow-2xl relative">
            <div class="absolute top-10 left-10 z-50 flex gap-4">
                <button onclick="closeModal('reader-modal')" class="p-6 bg-white/5 rounded-full hover:bg-white/10 transition text-white border border-white/10 shadow-2xl"><i data-lucide="chevron-left" class="w-7 h-7"></i></button>
                <button id="copy-link-btn" class="p-6 bg-gradient-to-br from-indigo-500/20 to-purple-500/20 hover:from-indigo-500/30 hover:to-purple-500/30 transition text-indigo-400 border-indigo-500/30 rounded-full shadow-2xl hover:shadow-indigo-500/50" title="Bağlantıyı Kopyala"><i data-lucide="link" class="w-8 h-8"></i></button>
            </div>
            <div class="md:w-1/2 h-[50vh] md:h-auto relative shrink-0">
                <img id="modal-img" src="" class="w-full h-full object-cover" />
                <div class="absolute inset-0 bg-gradient-to-t md:bg-gradient-to-r from-[#050505] via-transparent to-transparent"></div>
                <div class="absolute bottom-16 left-16 right-16">
                    <span id="modal-category" class="bg-indigo-600 px-6 py-2 rounded-full text-[10px] font-black uppercase tracking-[0.2em] mb-6 inline-block text-white shadow-xl"></span>
                    <h2 id="modal-title" class="text-6xl md:text-7xl font-black leading-[0.9] tracking-tighter text-white uppercase"></h2>
                </div>
            </div>
            <div class="md:w-1/2 p-8 md:p-24 overflow-y-auto bg-[#050505] custom-scrollbar">
                <div id="modal-content" class="prose prose-invert prose-p:text-gray-400 prose-p:text-xl prose-h2:text-white prose-h2:text-4xl"></div>
                <div class="mt-24 p-10 bg-white/[0.02] border border-white/5 rounded-[2.5rem] text-center">
                    <h4 class="text-2xl font-black text-white uppercase mb-6">Haftalık Analizler</h4>
                    <form id="newsletter-form-modal" class="flex flex-col gap-3">
                        <input type="email" required placeholder="E-POSTA" class="w-full bg-white/5 border border-white/10 rounded-2xl px-6 py-4 outline-none focus:border-indigo-500 text-xs font-bold" />
                        <button type="submit" class="w-full bg-white text-black py-4 rounded-2xl font-black text-[10px] uppercase">Abone Ol</button>
                    </form>
                </div>
                <div class="mt-24 pt-12 border-t border-white/5">
                    <h3 class="text-3xl font-black text-white uppercase mb-12 flex items-center gap-4">Yorumlar <span id="comment-count-label" class="text-indigo-500 text-sm">0</span></h3>
                    <form id="modal-comment-form" class="space-y-4 mb-16">
                        <input name="author" id="comment-author" required placeholder="İSMİNİZ" class="w-full bg-white/5 border border-white/10 rounded-2xl px-6 py-4 outline-none focus:border-indigo-500 text-xs font-bold" />
                        <textarea name="text" id="comment-text" required placeholder="FİKRİNİZİ PAYLAŞIN..." class="w-full bg-white/5 border border-white/10 rounded-2xl px-6 py-4 outline-none focus:border-indigo-500 text-xs font-bold" rows="3"></textarea>
                        <button type="submit" class="bg-indigo-600 text-white px-8 py-3 rounded-xl font-black text-[10px] uppercase">Gönder</button>
                    </form>
                    <div id="modal-comments-list" class="space-y-8"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="login-modal" class="fixed inset-0 z-[140] flex items-center justify-center p-6 bg-black backdrop-blur-3xl hidden-modal">
        <div class="bg-[#050505] border border-white/10 p-16 rounded-[4rem] w-full max-w-md shadow-2xl">
            <h3 class="text-5xl font-black tracking-tighter text-white mb-16 uppercase italic text-center">Erişim</h3>
            <form id="login-form" class="space-y-8">
                <input id="login-input" type="password" placeholder="Parola" class="w-full bg-white/5 border border-white/10 rounded-2xl px-6 py-6 outline-none focus:border-indigo-500 text-center text-2xl tracking-[0.5em] text-white" required />
                <button type="submit" class="w-full px-8 py-6 bg-white text-black rounded-full font-bold text-sm uppercase tracking-widest hover:bg-gray-200 transition">Doğrula</button>
                <button type="button" onclick="closeModal('login-modal')" class="w-full text-gray-600 text-xs font-bold uppercase tracking-widest hover:text-white transition">Vazgeç</button>
            </form>
        </div>
    </div>

    <div id="admin-modal" class="fixed inset-0 z-[150] bg-black overflow-y-auto p-12 hidden-modal">
        <div class="max-w-7xl mx-auto">
            <header class="flex justify-between items-end mb-24 border-b border-white/5 pb-12">
                <div><h1 class="text-4xl font-black tracking-tighter uppercase mb-2">Yönetim Paneli</h1><p class="text-gray-500 text-xs font-bold tracking-[0.3em] uppercase">CMS</p></div>
                <button onclick="closeModal('admin-modal')" class="px-8 py-4 bg-white/5 text-white border border-white/10 rounded-full font-bold text-sm uppercase tracking-widest hover:bg-white/10 transition">Kapat</button>
            </header>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
                <div class="space-y-12">
                    <section class="space-y-8">
                        <h2 class="text-[10px] font-black uppercase tracking-[0.4em] text-gray-600">Site Ayarları</h2>
                        <div class="bg-white/[0.01] border border-white/[0.06] rounded-[2.5rem] p-8 space-y-4">
                            <input id="set-name" placeholder="Ad Soyad" class="w-full bg-white/5 border border-white/10 rounded-2xl px-6 py-4 outline-none focus:border-indigo-500" />
                            <input id="set-role" placeholder="Rol" class="w-full bg-white/5 border border-white/10 rounded-2xl px-6 py-4 outline-none focus:border-indigo-500" />
                            <input id="set-profile-img" placeholder="Profil Resmi URL" class="w-full bg-white/5 border border-white/10 rounded-2xl px-6 py-4 outline-none focus:border-indigo-500" />
                            <textarea id="set-about" placeholder="Hakkımda" class="w-full bg-white/5 border border-white/10 rounded-2xl px-6 py-4 outline-none focus:border-indigo-500" rows="3"></textarea>
                            <button id="btn-save-settings" class="w-full py-4 bg-white text-black rounded-full font-bold text-xs uppercase tracking-widest hover:bg-gray-200">Ayarları Kaydet</button>
                        </div>
                    </section>
                    <section class="space-y-8">
                        <h2 class="text-[10px] font-black uppercase tracking-[0.4em] text-emerald-400">Aboneler</h2>
                        <div id="admin-subscribers" class="space-y-4 max-h-[250px] overflow-y-auto pr-2 custom-scrollbar"></div>
                    </section>
                    <section class="space-y-8">
                        <h2 class="text-[10px] font-black uppercase tracking-[0.4em] text-indigo-400">Gelen Mesajlar</h2>
                        <div id="admin-messages" class="space-y-4 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar"></div>
                    </section>
                    <section class="space-y-8">
                        <h2 class="text-[10px] font-black uppercase tracking-[0.4em] text-rose-400">Yorum Moderasyonu</h2>
                        <div id="admin-comments" class="space-y-4 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar"></div>
                    </section>
                </div>
                <div class="lg:col-span-2 space-y-12">
                    <section class="space-y-8">
                        <div class="flex items-center justify-between">
                            <h2 id="editor-label" class="text-[10px] font-black uppercase tracking-[0.4em] text-gray-600">Yeni Blog Yazısı</h2>
                            <button onclick="window.resetEditor()" class="text-[10px] font-black uppercase tracking-widest text-indigo-400 hover:text-indigo-300 flex items-center gap-2 transition-colors">
                                <i data-lucide="plus" class="w-4 h-4"></i> Yeni Yazı
                            </button>
                        </div>
                        <div class="bg-white/[0.01] border border-white/[0.06] rounded-[2.5rem] p-8 space-y-6">
                            <input id="post-title" placeholder="Yazı Başlığı" class="w-full bg-white/5 border border-white/10 rounded-2xl px-8 py-5 text-xl font-bold outline-none focus:border-indigo-500" />
                            <div class="grid grid-cols-2 gap-4">
                                <input id="post-category" placeholder="Kategori" class="bg-white/5 border border-white/10 rounded-2xl px-6 py-4 outline-none focus:border-indigo-500" />
                                <input id="post-image" placeholder="Kapak Görsel URL" class="bg-white/5 border border-white/10 rounded-2xl px-6 py-4 outline-none focus:border-indigo-500" />
                            </div>
                            <div class="flex gap-2 p-2 bg-white/5 rounded-xl">
                                <button onclick="execCmd('bold')" class="p-2 text-gray-500 hover:text-white"><i data-lucide="bold" class="w-4 h-4"></i></button>
                                <button onclick="execCmd('italic')" class="p-2 text-gray-500 hover:text-white"><i data-lucide="italic" class="w-4 h-4"></i></button>
                                <button onclick="execCmd('formatBlock', 'h2')" class="p-2 text-gray-500 hover:text-white"><i data-lucide="heading-2" class="w-4 h-4"></i></button>
                                <button onclick="promptImg()" class="p-2 px-4 bg-indigo-500/10 text-indigo-400 rounded-full text-[10px] font-bold uppercase ml-auto">Resim Ekle</button>
                            </div>
                            <div id="post-editor" contenteditable="true" class="rich-editor prose prose-invert max-w-none"></div>
                            <button id="btn-publish-post" class="w-full py-6 bg-white text-black rounded-full font-bold text-sm uppercase tracking-widest hover:bg-gray-200">Yayınla</button>
                        </div>
                        <div class="space-y-4">
                            <h2 class="text-[10px] font-black uppercase tracking-[0.4em] text-gray-600">Yayındakiler</h2>
                            <div id="admin-posts-list" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </div>

    <button id="back-to-top" onclick="window.scrollTo({ top: 0, behavior: 'smooth' })" class="fixed bottom-8 left-8 z-[70] p-4 bg-white text-black rounded-full btt-hidden transition-all duration-500 shadow-2xl hover:bg-gray-200">
        <i data-lucide="arrow-up" class="w-5 h-5 mx-auto"></i>
    </button>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
        import { getFirestore, collection, doc, onSnapshot, query, addDoc, setDoc, deleteDoc, serverTimestamp, getDocs, getDoc, updateDoc, where } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDtN5CJ4fvWMCkGImJEMfKQrIiBdeKZKqI",
            authDomain: "portfolyo-145a9.firebaseapp.com",
            projectId: "portfolyo-145a9",
            storageBucket: "portfolyo-145a9.firebasestorage.app",
            messagingSenderId: "230588990982",
            appId: "1:230588990982:web:d7fbb79d94bb4cc9b22587",
            measurementId: "G-TKWT71JERB"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = "portfolyo-145a9";

        window.siteData = {};
        window.posts = [];
        window.comments = [];
        window.subscribers = [];
        window.selectedPostId = null;
        window.currentCategory = 'all';
        window.currentSort = 'newest';
        window.displayedPosts = 9;
        
        let unsubMessages, unsubSubscribers, unsubComments;

        const brevoConfig = {
            apiKey: "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",
            senderEmail: "soneryilmaz021@gmail.com",
            senderName: "Soner Yılmaz"
        };

        window.createSlug = (title) => {
            const trMap = { 'ç': 'c', 'ğ': 'g', 'ı': 'i', 'ö': 'o', 'ş': 's', 'ü': 'u', 'Ç': 'c', 'Ğ': 'g', 'İ': 'i', 'Ö': 'o', 'Ş': 's', 'Ü': 'u' };
            return title
                .split('')
                .map(c => trMap[c] || c)
                .join('')
                .toLowerCase()
                .replace(/[^a-z0-9\s-]/g, '')
                .trim()
                .replace(/\s+/g, '-')
                .replace(/-+/g, '-');
        };

        window.getCategoryColor = (category) => {
            const colors = {
                'fintech': 'bg-indigo-500 border-indigo-400 text-indigo-100',
                'borsa': 'bg-blue-500 border-blue-400 text-blue-100',
                'yatırım': 'bg-emerald-500 border-emerald-400 text-emerald-100',
                'teknoloji': 'bg-purple-500 border-purple-400 text-purple-100',
                'halka arz': 'bg-orange-500 border-orange-400 text-orange-100',
                'genel': 'bg-gray-500 border-gray-400 text-gray-100'
            };
            return colors[category.toLowerCase()] || 'bg-gray-500 border-gray-400 text-gray-100';
        };

        window.calculateReadingTime = (content) => {
            const cleanText = content.replace(/<[^>]*>/g, ' ').replace(/\s+/g, ' ').trim();
            const wordCount = cleanText.split(' ').length;
            const readingTime = Math.ceil(wordCount / 200);
            return readingTime < 1 ? '1' : readingTime.toString();
        };

        window.getExcerpt = (content, maxLength = 120) => {
            const cleanText = content.replace(/<[^>]*>/g, ' ').replace(/\s+/g, ' ').trim();
            return cleanText.length > maxLength ? cleanText.substring(0, maxLength) + '...' : cleanText;
        };

        window.formatDate = (timestamp) => {
            if (!timestamp) return '';
            const date = timestamp.seconds ? new Date(timestamp.seconds * 1000) : new Date(timestamp);
            return date.toLocaleDateString('tr-TR', { day: 'numeric', month: 'long', year: 'numeric' });
        };

        window.updateSEO = (post) => {
            const descEl = document.getElementById('site-description') || document.querySelector('meta[name="description"]');
            const keyEl = document.getElementById('site-keywords') || document.querySelector('meta[name="keywords"]');
            const ogTitle = document.getElementById('og-title') || document.querySelector('meta[property="og:title"]');
            const ogDesc = document.getElementById('og-description') || document.querySelector('meta[property="og:description"]');
            const ogUrl = document.getElementById('og-url') || document.querySelector('meta[property="og:url"]');
            const ogImage = document.getElementById('og-image') || document.querySelector('meta[property="og:image"]');
            const ogType = document.getElementById('og-type') || document.querySelector('meta[property="og:type"]');
            const twitterCard = document.getElementById('twitter-card') || document.querySelector('meta[name="twitter:card"]');
            const twitterTitle = document.getElementById('twitter-title') || document.querySelector('meta[name="twitter:title"]');
            const twitterDesc = document.getElementById('twitter-description') || document.querySelector('meta[name="twitter:description"]');
            const twitterImage = document.getElementById('twitter-image') || document.querySelector('meta[name="twitter:image"]');
            const canonEl = document.getElementById('site-canonical') || document.querySelector('link[rel="canonical"]');
            const jsonLdEl = document.getElementById('structured-data-ld');

            if (!post) {
                document.title = "Soner Yılmaz | FinTech Geliştiricisi & Yatırım Analisti";
                if (descEl) descEl.content = 'Finansal piyasaları kod ve yapay zeka ile analiz eden, halka arz ve borsa stratejileri geliştiren junior yazılımcı portfolyosu.';
                if (keyEl) keyEl.content = 'Soner Yılmaz, Borsa, Yatırım, Halka Arz, BES, Yazılım, Yapay Zeka, FinTech';
                if (ogTitle) ogTitle.content = "Soner Yılmaz | FinTech Geliştiricisi & Yatırım Analisti";
                if (ogDesc) ogDesc.content = 'Finansal piyasaları kod ve yapay zeka ile analiz eden, halka arz ve borsa stratejileri geliştiren junior yazılımcı portfolyosu.';
                if (ogUrl) ogUrl.content = window.location.origin;
                if (ogType) ogType.content = 'website';
                if (twitterCard) twitterCard.content = 'summary_large_image';
                if (twitterTitle) twitterTitle.content = "Soner Yılmaz | FinTech Geliştiricisi & Yatırım Analisti";
                if (twitterDesc) twitterDesc.content = 'Finansal piyasaları kod ve yapay zeka ile analiz eden, halka arz ve borsa stratejileri geliştiren junior yazılımcı portfolyosu.';
                if (canonEl) canonEl.href = window.location.origin;
                if (jsonLdEl) {
                    const homeSchema = {
                        "@context": "https://schema.org",
                        "@type": "WebSite",
                        "name": "Soner Yılmaz",
                        "url": window.location.origin,
                        "description": "Finansal piyasaları kod ve yapay zeka ile analiz eden, halka arz ve borsa stratejileri geliştiren junior yazılımcı portfolyosu.",
                        "author": {
                            "@type": "Person",
                            "name": "Soner Yılmaz",
                            "jobTitle": "FinTech Geliştiricisi & Yatırım Analisti"
                        }
                    };
                    jsonLdEl.textContent = JSON.stringify(homeSchema);
                }
                return;
            }

            const cleanContent = post.content.replace(/<[^>]*>/g, ' ').replace(/\s+/g, ' ').trim();
            const summary = cleanContent.substring(0, 160) + "...";
            const newTitle = `${post.title} | Soner Yılmaz`;
            const slug = post.slug || window.createSlug(post.title);
            const postUrl = `${window.location.origin}/blog/${slug}`;

            document.title = newTitle;
            if (descEl) descEl.content = summary;
            if (keyEl) keyEl.content = `${post.category}, ${post.title}, Soner Yılmaz`;
            if (ogTitle) ogTitle.content = newTitle;
            if (ogDesc) ogDesc.content = summary;
            if (ogUrl) ogUrl.content = postUrl;
            if (ogImage) ogImage.content = post.imageUrl;
            if (ogType) ogType.content = 'article';
            if (twitterCard) twitterCard.content = 'summary_large_image';
            if (twitterTitle) twitterTitle.content = newTitle;
            if (twitterDesc) twitterDesc.content = summary;
            if (twitterImage) twitterImage.content = post.imageUrl;
            if (canonEl) canonEl.href = postUrl;

            const schemaData = {
                "@context": "https://schema.org",
                "@type": "BlogPosting",
                "headline": post.title,
                "description": summary,
                "image": post.imageUrl,
                "author": { "@type": "Person", "name": "Soner Yılmaz", "jobTitle": "FinTech Geliştiricisi & Yatırım Analisti" },
                "datePublished": post.createdAt ? new Date(post.createdAt.seconds * 1000).toISOString() : new Date().toISOString(),
                "url": postUrl,
                "publisher": {
                    "@type": "Organization",
                    "name": "Soner Yılmaz",
                    "logo": {
                        "@type": "ImageObject",
                        "url": post.imageUrl
                    }
                },
                "mainEntityOfPage": {
                    "@type": "WebPage",
                    "@id": postUrl
                }
            };
            if (jsonLdEl) jsonLdEl.textContent = JSON.stringify(schemaData);
        };

        window.openReader = (id) => {
            const p = window.posts.find(x => x.id === id);
            if (!p) return;
            window.selectedPostId = id;
            window.updateSEO(p);

            document.getElementById('modal-img').src = p.imageUrl;
            const categoryEl = document.getElementById('modal-category');
            categoryEl.innerText = p.category;
            categoryEl.className = `px-6 py-2 rounded-full text-[10px] font-black uppercase tracking-[0.2em] mb-6 inline-block text-white shadow-xl ${window.getCategoryColor(p.category).split(' ')[0]} border ${window.getCategoryColor(p.category).split(' ').slice(1).join(' ')}`;
            document.getElementById('modal-title').innerText = p.title;
            document.getElementById('modal-content').innerHTML = p.content;
            
            const slug = p.slug || window.createSlug(p.title);
            try {
                window.history.pushState({ postId: id }, '', `/blog/${slug}`);
            } catch (e) {
                console.error('URL değiştirme hatası:', e);
                const url = new URL(window.location);
                url.searchParams.set('post', id);
                window.history.pushState({}, '', url);
            }
            
            renderComments(id);
            document.getElementById('reader-modal').classList.remove('hidden-modal');
            lucide.createIcons();
        };

        async function loadInitialData() {
            try {
                // Check if bot and URL has blog slug - load specific post first for SEO
                const pathParts = window.location.pathname.split('/');
                const urlPostId = new URLSearchParams(window.location.search).get('post');
                const pathPostId = pathParts[1] === 'blog' ? pathParts[2] : null;
                const postId = pathPostId || urlPostId;
                const isBotUA = /(googlebot|bingbot|slurp|duckduckbot|baiduspider|yandexbot|facebookexternalhit|twitterbot|linkedinbot|whatsapp|telegrambot|ia_archiver|applebot|semrushbot|ahrefsbot|dotbot|mj12bot)/i.test(navigator.userAgent);
                
                let botPost = null;
                
                // If bot and has blog URL, load that post first
                if (isBotUA && postId) {
                    console.log('Bot detected, loading blog post first:', postId);
                    try {
                        const q = query(collection(db, 'artifacts', appId, 'public', 'data', 'blogPosts'), where('slug', '==', postId));
                        const postSnap = await getDocs(q);
                        if (!postSnap.empty) {
                            botPost = { id: postSnap.docs[0].id, ...postSnap.docs[0].data() };
                            window.updateSEO(botPost);
                            
                            // Force modal open for bot screenshots
                            setTimeout(() => {
                                const modal = document.getElementById('reader-modal');
                                if (modal) {
                                    modal.classList.remove('hidden-modal');
                                    modal.style.display = 'flex';
                                    
                                    const imgEl = document.getElementById('modal-img');
                                    const titleEl = document.getElementById('modal-title');
                                    const contentEl = document.getElementById('modal-content');
                                    const categoryEl = document.getElementById('modal-category');
                                    
                                    if (imgEl) imgEl.src = botPost.imageUrl;
                                    if (titleEl) titleEl.innerText = botPost.title;
                                    if (contentEl) contentEl.innerHTML = botPost.content;
                                    if (categoryEl) categoryEl.innerText = botPost.category;
                                }
                            }, 50);
                        }
                    } catch (e) {
                        console.error('Error loading blog post for bot:', e);
                    }
                }
                
                // Load all posts
                const postsSnap = await getDocs(collection(db, 'artifacts', appId, 'public', 'data', 'blogPosts'));
                window.posts = postsSnap.docs.map(d => ({ id: d.id, ...d.data() }));
                
                window.posts.forEach(p => {
                    if (!p.slug) {
                        p.slug = window.createSlug(p.title);
                        updateDoc(doc(db, 'artifacts', appId, 'public', 'data', 'blogPosts', p.id), { slug: p.slug }).catch(e => console.error('Slug güncelleme hatası:', e));
                    }
                });
                
                window.posts.sort((a,b) => (b.createdAt?.seconds||0) - (a.createdAt?.seconds||0));
                
                renderBlog(window.posts);
                renderAdminPosts();

                const settingsSnap = await getDoc(doc(db, 'artifacts', appId, 'public', 'data', 'siteSettings', 'config'));
                if (settingsSnap.exists()) {
                    window.siteData = settingsSnap.data();
                    updateSiteUI();
                }

                // Handle blog URL opening for non-bots or if bot didn't find post
                if (!botPost && postId) {
                    let target = window.posts.find(p => p.slug === postId || p.id === postId);
                    if (target) {
                        window.updateSEO(target);
                        setTimeout(() => window.openReader(target.id), 200);
                    }
                }
            } catch (e) { 
                console.error("Kota aşımı veya yükleme hatası:", e); 
                document.getElementById('blog-grid').innerHTML = `
                    <div class="col-span-full text-center py-20">
                        <i data-lucide="alert-circle" class="w-16 h-16 text-gray-600 mx-auto mb-4"></i>
                        <p class="text-gray-500 text-lg">Veriler yüklenirken bir hata oluştu.</p>
                    </div>
                `;
                lucide.createIcons();
            }
        }

        signInAnonymously(auth).catch(err => {
            console.error("Auth hatası:", err);
            alert('Firebase bağlantısı başarısız.');
        });
        
        onAuthStateChanged(auth, (user) => {
            if (user) {
                loadInitialData();
                unsubMessages = onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'messages'), snap => renderAdminMessages(snap.docs.map(d => ({id: d.id, ...d.data()}))));
                unsubSubscribers = onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'subscribers'), snap => { 
                    window.subscribers = snap.docs.map(d => ({id: d.id, ...d.data()})); 
                    renderAdminSubscribers(); 
                });
                unsubComments = onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'comments'), snap => {
                    window.comments = snap.docs.map(d => ({id: d.id, ...d.data()}));
                    if (window.selectedPostId) renderComments(window.selectedPostId);
                    renderBlog(); 
                    renderAdminComments();
                });
            }
        });

        function updateSiteUI() {
            const data = window.siteData;
            document.getElementById('site-role').innerText = data.role || "FinTech Geliştiricisi";
            document.getElementById('site-about-text').innerText = `"${data.aboutText || "Hoş geldiniz."}"`;
            if (data.profileImage) document.getElementById('site-profile-img').src = data.profileImage;
            document.getElementById('site-name-footer').innerText = data.name || "Soner Yılmaz";
            const heroTitle = data.heroTitle || "Geleceği bugünden inşa edin.";
            document.getElementById('site-hero-title').innerHTML = heroTitle.split(' ').map(w => 
                w.toLowerCase().includes('bugünden') ? `<span class="text-indigo-500">${w}</span>` : w
            ).join(' ');
            document.getElementById('set-name').value = data.name || "";
            document.getElementById('set-role').value = data.role || "";
            document.getElementById('set-profile-img').value = data.profileImage || "";
            document.getElementById('set-about').value = data.aboutText || "";
        }

        window.handleSearch = (term) => {
            const clearBtn = document.getElementById('clear-search');
            if (clearBtn) {
                clearBtn.style.display = term.length > 0 ? 'block' : 'none';
            }
            
            renderBlogCards(getFilteredAndSortedPosts());
        };

        window.filterByCategory = (category) => {
            window.currentCategory = category;
            document.querySelectorAll('.category-chip').forEach(chip => {
                chip.classList.remove('active', 'bg-indigo-500', 'text-white', 'border-indigo-400');
                chip.classList.add('bg-white/5', 'text-gray-400', 'border-white/10');
            });
            const activeChip = document.querySelector(`[data-category="${category}"]`);
            if (activeChip) {
                activeChip.classList.remove('bg-white/5', 'text-gray-400', 'border-white/10');
                activeChip.classList.add('active', 'bg-indigo-500', 'text-white', 'border-indigo-400');
            }
            renderBlogWithFilters();
        };

        window.handleSort = (sortBy) => {
            window.currentSort = sortBy;
            renderBlogWithFilters();
        };

        window.loadMorePosts = () => {
            window.displayedPosts += 6;
            renderBlogCards(getFilteredAndSortedPosts());
        };

        function getFilteredAndSortedPosts() {
            let filtered = [...window.posts];
            
            if (window.currentCategory !== 'all') {
                filtered = filtered.filter(p => p.category.toLowerCase() === window.currentCategory.toLowerCase());
            }
            
            const searchTerm = document.getElementById('blog-search').value.toLowerCase();
            if (searchTerm) {
                filtered = filtered.filter(p => 
                    p.title.toLowerCase().includes(searchTerm) || 
                    p.category.toLowerCase().includes(searchTerm) ||
                    (p.content && p.content.toLowerCase().includes(searchTerm))
                );
            }
            
            switch (window.currentSort) {
                case 'popular':
                    filtered.sort((a, b) => (b.views || 0) - (a.views || 0));
                    break;
                case 'comments':
                    const commentCounts = {};
                    window.comments.forEach(c => {
                        commentCounts[c.postId] = (commentCounts[c.postId] || 0) + 1;
                    });
                    filtered.sort((a, b) => (commentCounts[b.id] || 0) - (commentCounts[a.id] || 0));
                    break;
                default:
                    filtered.sort((a, b) => (b.createdAt?.seconds||0) - (a.createdAt?.seconds||0));
            }
            
            return filtered;
        }

        function renderBlogWithFilters() {
            renderBlogCards(getFilteredAndSortedPosts());
        }

        function renderBlogCards(dataToRender = window.posts) {
            const grid = document.getElementById('blog-grid');
            const loadMoreContainer = document.getElementById('load-more-container');
            
            if (dataToRender.length === 0) {
                grid.innerHTML = `
                    <div class="col-span-full text-center py-20">
                        <i data-lucide="search-x" class="w-16 h-16 text-gray-600 mx-auto mb-4"></i>
                        <p class="text-gray-500 text-lg">Sonuç bulunamadı.</p>
                        <button onclick="window.filterByCategory('all')" class="mt-4 text-indigo-400 hover:text-indigo-300 font-bold text-sm uppercase tracking-widest">
                            Tüm Yazıları Göster
                        </button>
                    </div>
                `;
                loadMoreContainer.classList.add('hidden');
                lucide.createIcons();
                return;
            }

            const postsToShow = dataToRender.slice(0, window.displayedPosts);
            grid.innerHTML = postsToShow.map((p, index) => renderBlogCard(p, index)).join('');
            
            if (dataToRender.length > window.displayedPosts) {
                loadMoreContainer.classList.remove('hidden');
            } else {
                loadMoreContainer.classList.add('hidden');
            }

            lucide.createIcons();
        }

        function renderBlogCard(p, index) {
            const categoryClass = window.getCategoryColor(p.category);
            const readingTime = window.calculateReadingTime(p.content);
            const excerpt = window.getExcerpt(p.content, 100);
            const commentCount = window.comments.filter(c => c.postId === p.id).length;
            const delay = index * 0.1;

            return `
                <div onclick="window.openReader('${p.id}')" class="blog-card group cursor-pointer bg-white/[0.01] border border-white/[0.05] rounded-[2rem] overflow-hidden transition-all duration-500 hover:border-indigo-500/30" style="animation-delay: ${delay}s">
                    <div class="aspect-[4/3] overflow-hidden relative">
                        <img src="${p.imageUrl}" class="card-img w-full h-full object-cover transition-transform duration-700 grayscale group-hover:grayscale-0" />
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
                        <div class="absolute top-4 left-4">
                            <span class="${categoryClass} px-4 py-1.5 rounded-full text-[9px] font-black uppercase border tracking-[0.2em] backdrop-blur-sm">${p.category}</span>
                        </div>
                    </div>
                    <div class="p-6 space-y-4">
                        <div class="flex items-center gap-4 text-[10px] font-black uppercase tracking-widest text-gray-500">
                            <span class="flex items-center gap-1.5">
                                <i data-lucide="clock" class="w-3 h-3"></i> ${readingTime}dk
                            </span>
                            <span class="flex items-center gap-1.5">
                                <i data-lucide="message-square" class="w-3 h-3 text-indigo-500"></i> ${commentCount}
                            </span>
                        </div>
                        <h3 class="text-xl font-bold leading-tight group-hover:text-indigo-400 transition-colors text-white uppercase">${p.title}</h3>
                        <p class="text-gray-400 text-sm line-clamp-2 leading-relaxed">${excerpt}</p>
                        <div class="flex items-center justify-between pt-4 border-t border-white/[0.05]">
                            <span class="text-[10px] font-medium text-gray-500">${window.formatDate(p.createdAt)}</span>
                            <span class="text-[10px] font-black uppercase tracking-widest text-indigo-400 flex items-center gap-1 group-hover:gap-2 transition-all">
                                Oku <i data-lucide="arrow-right" class="w-3 h-3"></i>
                            </span>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderBlog(dataToRender = window.posts) {
            if (dataToRender.length === 0) return;
            
            renderFeaturedPost(dataToRender[0]);
            renderBlogCards(dataToRender.slice(1));
            renderSidebar(dataToRender);
            
            const categories = [...new Set(dataToRender.map(p => p.category))];
            renderCategoryFilters(categories);
            
            document.getElementById('total-posts-count').innerText = dataToRender.length;
        }

        function renderFeaturedPost(post) {
            if (!post) return;
            const categoryClass = window.getCategoryColor(post.category);
            const readingTime = window.calculateReadingTime(post.content);
            const excerpt = window.getExcerpt(post.content, 200);
            
            const featuredContainer = document.getElementById('featured-post');
            featuredContainer.innerHTML = `
                <div onclick="window.openReader('${post.id}')" class="group cursor-pointer relative rounded-[3rem] overflow-hidden h-[500px] md:h-[600px]">
                    <img src="${post.imageUrl}" class="card-img w-full h-full object-cover transition-transform duration-700 grayscale group-hover:grayscale-0 scale-105 group-hover:scale-110" />
                    <div class="absolute inset-0 featured-overlay"></div>
                    <div class="absolute inset-0 flex items-end p-8 md:p-16">
                        <div class="max-w-3xl">
                            <div class="flex flex-wrap items-center gap-4 mb-6">
                                <span class="${categoryClass} px-6 py-2 rounded-full text-[10px] font-black uppercase border tracking-[0.3em] backdrop-blur-sm">${post.category}</span>
                                <span class="bg-black/50 backdrop-blur-sm px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest text-white flex items-center gap-2">
                                    <i data-lucide="clock" class="w-3 h-3"></i> ${readingTime}dk okuma
                                </span>
                                <span class="bg-black/50 backdrop-blur-sm px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest text-white">
                                    ${window.formatDate(post.createdAt)}
                                </span>
                            </div>
                            <h2 class="text-3xl md:text-5xl lg:text-6xl font-black leading-tight text-white uppercase mb-6 group-hover:text-indigo-400 transition-colors">${post.title}</h2>
                            <p class="text-gray-300 text-lg md:text-xl line-clamp-3 mb-8">${excerpt}</p>
                            <button class="bg-white text-black px-8 py-4 rounded-full font-bold text-sm uppercase tracking-widest hover:bg-indigo-500 hover:text-white transition-all duration-300 flex items-center gap-2">
                                <span>Devamını Oku</span>
                                <i data-lucide="arrow-right" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
            featuredContainer.classList.remove('hidden');
        }

        function renderSidebar(posts) {
            renderPopularPosts(posts);
            renderCategories(posts);
            renderTags(posts);
            renderArchive(posts);
        }

        function renderPopularPosts(posts) {
            const container = document.getElementById('popular-posts');
            const popular = [...posts].sort((a, b) => {
                const aComments = window.comments.filter(c => c.postId === a.id).length;
                const bComments = window.comments.filter(c => c.postId === b.id).length;
                return bComments - aComments;
            }).slice(0, 4);
            
            container.innerHTML = popular.map((p, i) => `
                <div onclick="window.openReader('${p.id}')" class="sidebar-card group cursor-pointer p-4 rounded-xl transition-all duration-300">
                    <div class="flex gap-4">
                        <div class="flex-shrink-0">
                            <span class="text-2xl font-black text-gray-700 group-hover:text-indigo-400 transition">${String(i + 1).padStart(2, '0')}</span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h4 class="text-sm font-bold text-white uppercase line-clamp-2 group-hover:text-indigo-400 transition">${p.title}</h4>
                            <div class="flex items-center gap-3 mt-2 text-[10px] text-gray-500">
                                <span class="font-medium">${window.calculateReadingTime(p.content)}dk</span>
                                <span class="flex items-center gap-1">
                                    <i data-lucide="message-square" class="w-3 h-3"></i> ${window.comments.filter(c => c.postId === p.id).length}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            lucide.createIcons();
        }

        function renderCategories(posts) {
            const container = document.getElementById('category-list');
            const categories = {};
            posts.forEach(p => {
                categories[p.category] = (categories[p.category] || 0) + 1;
            });
            
            container.innerHTML = Object.entries(categories).map(([category, count]) => {
                const isActive = window.currentCategory === category.toLowerCase();
                const colorClass = isActive ? 'bg-indigo-500/20 border-indigo-500 text-indigo-400' : 'bg-white/5 border-white/10 text-gray-400 hover:bg-white/10 hover:border-white/20';
                return `
                    <button onclick="window.filterByCategory('${category.toLowerCase()}')" class="sidebar-card w-full flex items-center justify-between p-4 rounded-xl border transition-all duration-300 ${colorClass}">
                        <span class="text-xs font-black uppercase tracking-wider">${category}</span>
                        <span class="text-xs font-bold">${count}</span>
                    </button>
                `;
            }).join('');
        }

        function renderTags(posts) {
            const container = document.getElementById('tags-list');
            const tags = new Set();
            posts.forEach(p => {
                const words = p.title.split(' ');
                words.forEach(w => {
                    if (w.length > 4) tags.add(w.toLowerCase());
                });
            });
            
            container.innerHTML = Array.from(tags).slice(0, 10).map(tag => `
                <button onclick="document.getElementById('blog-search').value='${tag}'; window.handleSearch('${tag}');" class="bg-white/5 border border-white/10 text-gray-400 px-3 py-1.5 rounded-full text-[10px] font-medium uppercase hover:bg-indigo-500/20 hover:border-indigo-500/40 hover:text-indigo-400 transition-all duration-300">
                    #${tag}
                </button>
            `).join('');
        }

        function renderArchive(posts) {
            const container = document.getElementById('archive-list');
            const months = {};
            posts.forEach(p => {
                if (p.createdAt) {
                    const date = p.createdAt.seconds ? new Date(p.createdAt.seconds * 1000) : new Date(p.createdAt);
                    const key = date.toLocaleDateString('tr-TR', { year: 'numeric', month: 'long' });
                    months[key] = (months[key] || 0) + 1;
                }
            });
            
            container.innerHTML = Object.entries(months)
                .sort((a, b) => new Date(b[0]) - new Date(a[0]))
                .slice(0, 6)
                .map(([month, count]) => `
                    <button class="sidebar-card w-full flex items-center justify-between p-4 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 hover:border-white/20 transition-all duration-300 text-gray-400 hover:text-white">
                        <span class="text-xs font-medium uppercase">${month}</span>
                        <span class="text-xs font-bold">${count}</span>
                    </button>
                `).join('');
        }

        function renderCategoryFilters(categories) {
            const container = document.getElementById('category-filters');
            const allBtn = container.querySelector('button[data-category="all"]');
            const existingButtons = container.querySelectorAll('button:not([data-category="all"])');
            existingButtons.forEach(btn => btn.remove());
            
            categories.forEach(category => {
                const btn = document.createElement('button');
                btn.onclick = () => window.filterByCategory(category.toLowerCase());
                btn.className = `category-chip bg-white/5 border border-white/10 text-gray-400 px-5 py-2 rounded-full text-[10px] font-black uppercase tracking-[0.2em] hover:bg-white/10 hover:text-white transition-all duration-300`;
                btn.setAttribute('data-category', category.toLowerCase());
                btn.innerText = category;
                container.appendChild(btn);
            });
        }

        function renderComments(postId) {
            const list = document.getElementById('modal-comments-list');
            const filtered = window.comments.filter(c => c.postId === postId).sort((a,b) => (b.createdAt?.seconds||0) - (a.createdAt?.seconds||0));
            document.getElementById('comment-count-label').innerText = filtered.length;
            if (filtered.length === 0) { list.innerHTML = '<p class="text-gray-700 italic text-sm">İlk yorumu siz yapın!</p>'; return; }
            list.innerHTML = filtered.map(c => `<div class="bg-white/[0.03] p-8 rounded-[2rem]"><div class="text-white font-bold text-sm uppercase mb-4">${c.author}</div><p class="text-gray-400 text-sm leading-relaxed">${c.text}</p></div>`).join('');
        }

        async function sendMail(to, subject, content) {
            try {
                const response = await fetch('https://api.brevo.com/v3/smtp/email', {
                    method: 'POST',
                    headers: { 'accept': 'application/json', 'api-key': brevoConfig.apiKey, 'content-type': 'application/json' },
                    body: JSON.stringify({
                        sender: { name: brevoConfig.senderName, email: brevoConfig.senderEmail },
                        to: [{ email: to }],
                        subject: subject,
                        htmlContent: content
                    })
                });
                if (!response.ok) {
                    throw new Error(`Mail gönderme başarısız: ${response.status}`);
                }
            } catch (err) {
                console.error('Mail gönderme hatası:', err);
            }
        }

        document.getElementById('btn-save-settings').onclick = async () => {
            const updated = { ...window.siteData, name: document.getElementById('set-name').value, role: document.getElementById('set-role').value, profileImage: document.getElementById('set-profile-img').value, aboutText: document.getElementById('set-about').value };
            try { 
                await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'siteSettings', 'config'), updated); 
                alert("Ayarlar kaydedildi!"); 
            } catch (err) { 
                console.error('Kaydetme hatası:', err);
                alert('Ayarlar kaydedilemedi.');
            }
        };

        document.getElementById('btn-publish-post').onclick = async () => {
            const title = document.getElementById('post-title').value;
            const content = document.getElementById('post-editor').innerHTML;
            if (!title || !content) return alert("Eksik bilgi!");
            const btn = document.getElementById('btn-publish-post');
            btn.innerText = "İŞLENİYOR..."; 
            btn.disabled = true;
            const slug = window.createSlug(title);
            const postData = { 
                title, 
                slug,
                category: document.getElementById('post-category').value || "Genel", 
                imageUrl: document.getElementById('post-image').value || "https://images.unsplash.com/photo-1499750310107-5fef28a66643?w=800", 
                content, 
                createdAt: serverTimestamp() 
            };
            try {
                if (window.editingPostId) {
                    await updateDoc(doc(db, 'artifacts', appId, 'public', 'data', 'blogPosts', window.editingPostId), postData);
                    alert("Yazı güncellendi!");
                } else {
                    await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'blogPosts'), postData);
                    for (const sub of window.subscribers) { 
                        await sendMail(sub.email, `Analiz: ${title}`, `<p>Yeni analiz yayında: <b>${title}</b></p><a href="${window.location.origin}/blog/${slug}">Hemen Oku</a>`); 
                    }
                    alert("Yazı yayınlandı!");
                }
                window.location.reload();
            } catch (err) {
                console.error('Yayın hatası:', err);
                alert('Yayınlanırken bir hata oluştu.');
                btn.innerText = window.editingPostId ? "Güncelle" : "Yayınla"; 
                btn.disabled = false;
            }
        };

        function renderAdminPosts() {
            const list = document.getElementById('admin-posts-list');
            list.innerHTML = window.posts.map(p => {
                const commentCount = window.comments.filter(c => c.postId === p.id).length;
                return `
                <div class="bg-white/[0.03] border border-white/[0.06] p-5 rounded-[2rem] flex justify-between items-center group hover:border-indigo-500/30 transition-all duration-300">
                    <div class="overflow-hidden pr-4 flex-1">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-[9px] font-black uppercase tracking-widest px-2 py-1 rounded-full ${window.getCategoryColor(p.category)}">${p.category}</span>
                            <span class="text-[9px] text-gray-500 font-medium flex items-center gap-1">
                                <i data-lucide="clock" class="w-3 h-3"></i> ${window.calculateReadingTime(p.content)}dk
                            </span>
                        </div>
                        <p class="font-bold truncate text-white text-sm">${p.title}</p>
                        <div class="flex items-center gap-3 mt-2 text-[9px] text-gray-500">
                            <span class="flex items-center gap-1">
                                <i data-lucide="message-square" class="w-3 h-3"></i> ${commentCount}
                            </span>
                            <span>${window.formatDate(p.createdAt)}</span>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="window.editPost('${p.id}')" class="p-3 bg-white/5 text-gray-400 hover:text-white hover:bg-white/10 rounded-xl transition-all">
                            <i data-lucide="edit-3" class="w-4 h-4"></i>
                        </button>
                        <button onclick="window.deleteData('blogPosts', '${p.id}')" class="p-3 bg-white/5 text-gray-400 hover:text-rose-500 hover:bg-rose-500/10 rounded-xl transition-all">
                            <i data-lucide="trash-2" class="w-4 h-4"></i>
                        </button>
                    </div>
                </div>
                `;
            }).join('');
            lucide.createIcons();
        }

        function renderAdminMessages(msgs) {
            const container = document.getElementById('admin-messages');
            container.innerHTML = msgs.map(m => `<div class="bg-white/5 p-4 rounded-xl relative"><button onclick="window.deleteData('messages', '${m.id}')" class="absolute top-2 right-2 text-gray-600 hover:text-rose-500"><i data-lucide="trash-2" class="w-3.5 h-3.5"></i></button><div class="text-[10px] font-bold text-white uppercase">${m.name}</div><div class="text-[8px] text-indigo-400 font-bold mb-2">${m.email}</div><p class="text-[10px] text-gray-500">${m.message}</p></div>`).join('');
            lucide.createIcons();
        }

        function renderAdminSubscribers() {
            const container = document.getElementById('admin-subscribers');
            container.innerHTML = window.subscribers.map(s => `<div class="bg-white/5 p-3 rounded-xl flex justify-between items-center"><span class="text-[10px] font-bold text-emerald-400">${s.email}</span><button onclick="window.deleteData('subscribers', '${s.id}')" class="text-gray-600 hover:text-rose-500"><i data-lucide="trash-2" class="w-3 h-3"></i></button></div>`).join('');
            lucide.createIcons();
        }

        function renderAdminComments() {
            const container = document.getElementById('admin-comments');
            container.innerHTML = window.comments.map(c => `<div class="bg-white/5 p-4 rounded-2xl relative group"><button onclick="window.deleteData('comments', '${c.id}')" class="absolute top-2 right-2 text-rose-500 opacity-0 group-hover:opacity-100"><i data-lucide="trash-2" class="w-3.5 h-3.5"></i></button><div class="text-[10px] font-bold text-white uppercase">${c.author}</div><p class="text-[10px] text-gray-500 truncate">${c.text}</p></div>`).join('');
            lucide.createIcons();
        }

        window.deleteData = async (col, id) => { 
            if (!confirm("Emin misiniz?")) return; 
            try { 
                await deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', col, id)); 
            } catch (err) { 
                console.error('Silme hatası:', err);
                alert('Silme işlemi başarısız.');
            }
        };
        
        window.resetEditor = () => {
            window.editingPostId = null;
            document.getElementById('post-title').value = '';
            document.getElementById('post-category').value = '';
            document.getElementById('post-image').value = '';
            document.getElementById('post-editor').innerHTML = '';
            document.getElementById('editor-label').innerText = "Yeni Blog Yazısı";
            document.getElementById('btn-publish-post').innerText = "Yayınla";
            window.scrollTo({ top: 0, behavior: 'smooth' });
        };

        window.editPost = (id) => { 
            const p = window.posts.find(x => x.id === id); 
            window.editingPostId = id; 
            document.getElementById('post-title').value = p.title; 
            document.getElementById('post-category').value = p.category; 
            document.getElementById('post-image').value = p.imageUrl; 
            document.getElementById('post-editor').innerHTML = p.content; 
            document.getElementById('editor-label').innerText = "Yazıyı Düzenle";
            document.getElementById('btn-publish-post').innerText = "Güncelle";
            window.scrollTo({ top: 0, behavior: 'smooth' }); 
        }

        document.getElementById('site-contact-form').onsubmit = async (e) => {
            e.preventDefault();
            const fd = new FormData(e.target);
            const data = { name: fd.get('name'), email: fd.get('email'), message: fd.get('message'), createdAt: serverTimestamp() };
            try { 
                await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'messages'), data); 
                await sendMail(brevoConfig.senderEmail, `Mesaj: ${data.name}`, `<h1>Mesajınız Var</h1><p><b>Kimden:</b> ${data.name}</p><p><b>Mesaj:</b> ${data.message}</p>`); 
                alert("Mesajınız iletildi!"); 
                e.target.reset(); 
            } catch (err) { 
                console.error('Mesaj gönderme hatası:', err);
                alert('Mesaj gönderilemedi.');
            }
        };

        const handleSub = async (e) => {
            e.preventDefault();
            const input = e.target.querySelector('input');
            if (!input.value) return;
            try { 
                await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'subscribers'), { email: input.value, createdAt: serverTimestamp() }); 
                alert("Abonelik Başarılı!"); 
                input.value = ""; 
            } catch (err) { 
                console.error('Abonelik hatası:', err);
                alert('Abonelik başarısız.');
            }
        };
        document.getElementById('newsletter-form-main').onsubmit = handleSub;
        document.getElementById('newsletter-form-modal').onsubmit = handleSub;

        document.getElementById('modal-comment-form').onsubmit = async (e) => {
            e.preventDefault();
            const author = document.getElementById('comment-author').value;
            const text = document.getElementById('comment-text').value;
            try { 
                await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'comments'), { postId: window.selectedPostId, author, text, createdAt: serverTimestamp() }); 
                e.target.reset(); 
            } catch (err) { 
                console.error('Yorum gönderme hatası:', err);
                alert('Yorum gönderilemedi.');
            }
        };

        document.getElementById('copy-link-btn').onclick = async () => {
            const url = window.location.href;
            try {
                await navigator.clipboard.writeText(url);
                const t = document.getElementById('copy-toast'); 
                t.classList.add('toast-show'); 
                setTimeout(() => t.classList.remove('toast-show'), 2000);
            } catch (err) {
                console.error('Kopyalama hatası:', err);
                const dummy = document.createElement('input');
                document.body.appendChild(dummy);
                dummy.value = url; 
                dummy.select();
                document.execCommand('copy');
                document.body.removeChild(dummy);
                const t = document.getElementById('copy-toast'); 
                t.classList.add('toast-show'); 
                setTimeout(() => t.classList.remove('toast-show'), 2000);
            }
        };



        function showToast(message) {
            const toast = document.getElementById('copy-toast');
            if (toast) {
                toast.innerText = message;
                toast.classList.add('toast-show');
                setTimeout(() => {
                    toast.classList.remove('toast-show');
                    setTimeout(() => {
                        toast.innerText = 'İşlem Başarılı!';
                    }, 300);
                }, 3000);
            }
        };

        window.cleanup = () => {
            if (unsubMessages) { unsubMessages(); unsubMessages = null; }
            if (unsubSubscribers) { unsubSubscribers(); unsubSubscribers = null; }
            if (unsubComments) { unsubComments(); unsubComments = null; }
        };
    </script>

    <script>
        function closeModal(id) { 
            document.getElementById(id).classList.add('hidden-modal'); 
            if (id === 'reader-modal') {
                window.selectedPostId = null;
                window.updateSEO(null); 
                try { 
                    window.history.pushState({}, '', '/'); 
                } catch(e) {
                    console.error('URL reset hatası:', e);
                }
            }
        }
        function execCmd(c, v = null) { document.execCommand(c, false, v); }
        function promptImg() { const u = prompt("Resim URL:"); if(u) document.execCommand('insertHTML', false, `<img src="${u}" style="width:100%; border-radius:1rem; margin:1rem 0;" />`); }

        window.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.shiftKey && (e.key.toLowerCase() === 'a' || e.code === 'KeyA')) {
                e.preventDefault();
                document.getElementById('login-modal').classList.remove('hidden-modal');
                document.getElementById('login-input').focus();
            }
        });
        document.getElementById('admin-trigger').onclick = () => document.getElementById('login-modal').classList.remove('hidden-modal');

        document.getElementById('login-form').onsubmit = (e) => {
            e.preventDefault();
            if (document.getElementById('login-input').value === 'KJSA1660') {
                document.getElementById('login-modal').classList.add('hidden-modal');
                document.getElementById('admin-modal').classList.remove('hidden-modal');
            } else alert("Hatalı Parola!");
        };

        window.onscroll = () => {
            const ws = window.scrollY;
            const h = document.documentElement.scrollHeight - window.innerHeight;
            const prog = document.getElementById('scroll-progress');
            if (prog) prog.style.width = (ws / h * 100) + '%';
            const btt = document.getElementById('back-to-top');
            if (ws > 300) { btt.classList.remove('btt-hidden'); btt.classList.add('btt-visible'); }
            else { btt.classList.add('btt-hidden'); btt.classList.remove('btt-visible'); }
        };

        window.addEventListener('beforeunload', () => {
            if (window.cleanup) window.cleanup();
        });

        lucide.createIcons();
    </script>
</body>
</html>